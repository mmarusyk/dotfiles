name: git_macos
description: Install and configure Git on macOS

steps:
  - name: install_git
    script: |
      log_verbose "üì¶ Installing..."
      brew install git

  - name: copy_config
    script: |
      log_verbose "üìù Copying..."
      ROOT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")/../../.." && pwd)"
      cp -f "$ROOT_DIR/config/git/gitconfig" "$HOME/.gitconfig"

  - name: configure_user
    script: |
      echo "üë§ Configuring Git user identification..."
      
      # Source the dotfiles environment
      if [[ -f ~/.dotfiles.env ]]; then
        source ~/.dotfiles.env
      fi
      
      if [[ -n "${DOTFILES_USER_NAME//[[:space:]]/}" ]]; then
        git config --global user.name "$DOTFILES_USER_NAME"
        echo "‚úÖ Set user.name: $DOTFILES_USER_NAME"
      fi
      
      if [[ -n "${DOTFILES_USER_EMAIL//[[:space:]]/}" ]]; then
        git config --global user.email "$DOTFILES_USER_EMAIL"
        echo "‚úÖ Set user.email: $DOTFILES_USER_EMAIL"
      fi
